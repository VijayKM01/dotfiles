# vi: ft=zsh

# Proper shell shortcuts
alias update='sudo apt-get update'
alias upgrade='sudo apt-get upgrade'
alias udg='sudo apt-get update && sudo apt-get upgrade'
alias udgp='update && sudo apt-get --with-new-pkgs upgrade'
alias aptinstall='sudo apt-get install -y'
alias aptremove='sudo apt-get remove'
alias aptpurge='sudo apt-get purge'
alias aptshow='apt show'
alias sau='sudo apt autoremove --purge'

alias ..='cd ..'
alias ...='cd ../../../'
alias :q='exit' # vim user :)

alias ls='ls -h'
alias l='ls --color -lA'
alias md='mkdir -p'
alias rd='rmdir'

alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'
alias grep="grep --color=auto"
alias ccat="highlight --replace-tabs=8 --out-format=xterm256 --style=pablo --force --"
alias path='echo $PATH | tr : "\n"'

# Shorter commands
alias \
	ka='killall' \
	g='git' \
	gc='g clone' \
	glols="git log --graph --pretty='\''%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'\'' --stat'" \
	trem='transmission-remote' \
	z='zathura'

## Dotbare
	alias d='dotbare'
	alias dfc='d commit -a'
	alias dfp='d push'
	alias dlol="d log --graph --pretty='\''%Cred%h%Creset -%C(auto)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'\'' --stat'"

# Backup:
	# Elements
		alias ehdry='rsync -r -n -t -v --delete --delete-excluded -l -i -s --exclude-from=/var/tmp/ignorelist /home/francesco/ /mnt/fraEl/hyperversum'
		alias ehbkp='rsync -r -t -v --delete --delete-excluded -l -i -s --exclude-from=/var/tmp/ignorelist /home/francesco/ /mnt/fraEl/hyperversum'
		alias eddry='rsync -r -n -t -v --delete -l -i -s /mnt/01D5707D40B081F0/Users/ascol/ /mnt/fraEl/ascol'
		alias edbkp='rsync -r -t -v --delete -l -i -s /mnt/01D5707D40B081F0/Users/ascol/ /mnt/fraEl/ascol'
	# Passport
		alias phdry='rsync -rLtv -n --delete --delete-excluded -i -s --exclude-from=/var/tmp/ignorelist /home/francesco/ /mnt/fraPass/hyperversum'
		alias phbkp='rsync -rLtv --delete --delete-excluded -i -s --exclude-from=/var/tmp/ignorelist /home/francesco/ /mnt/fraPass/hyperversum'
		alias pddry='rsync -rLtv -n --delete -i -s /mnt/01D5707D40B081F0/Users/ascol/ /mnt/fraPass/ascol'
		alias pdbkp='rsync -rLtv --delete -i -s /mnt/01D5707D40B081F0/Users/ascol/ /mnt/fraPass/ascol'

# Utils
	alias sT="tabbed -c -r 2 st -w id "
	alias cmatrix='unimatrix -n -s 96 -c "cyan" -l "o"'
	alias matrix='unimatrix -a -f -b -s 96 -l m'
	alias brave='brave-browser'
	alias psg='ps axch -o cmd:18,%mem,pid --sort -%mem|grep '
	alias cx='chmod +x'
	alias xclip="xclip -sel clip"
	alias rm='rm -i'
	alias cp='cp -i'
	alias mv='mv -i'
	alias p='patch'
	alias wtr='curl "wttr.in/Pisa?pqtF&lang=it" '
	alias wtrg='curl "v2.wttr.in/Pisa?pqtF&lang=it" '

# Remove spaces
	alias rsf='find -name "* *" -type f | rename "s/ /_/g"'
	alias rsd='find -name "* *" -type d | rename "s/ /_/g"'
	alias rsb='find -name "*(*)*" -type f | rename "s/\(|\)|\[|\]//g"'

# Various
	alias nvidia='/mnt/01D5707D40B081F0/Users/ascol/Documents/UNI/Roba/robaUtile/nvidia_info.sh | aha -b -t "Nvidia" > nvidia.html'
	alias ytmp3='youtube-dl --extract-audio --audio-quality 0 --audio-format mp3 ' # works for playlists too
	alias mpva='mpv --input-ipc-server=/tmp/mpvsoc$(date +%%s)'
	alias mpvv='setsid mpv --input-ipc-server=/tmp/mpvsoc$(date +%%s)'
	alias bctl='bluetoothctl'
	alias cbh='connectHeadphones'
	alias nf='neofetch'
	alias pf='pfetch'
	alias tg='Telegram'
	alias rxs='killall xscreensaver; xscreensaver -no-splash & disown %1'
	alias ud='udict'
	alias def='define'
	alias abook='abook -C $XDG_CONFIG_HOME/abook/abookrc --datafile $XDG_DATA_HOME/abook/addressbook'
	alias fixabook="sudo sed -i 's/abook -/abook -C \$XDG_CONFIG_HOME\/abook\/abookrc --datafile \$XDG_DATA_HOME\/abook\/addressbook -/g' /usr/local/share/mutt-wizard/mutt-wizard.muttrc"
	alias waterfox='~/programs_drivers/web_stuff/waterfox --profile /home/francesco/.config/waterfox/gsrs4v45.68-edition-default'
	alias w3m='w3m -bookmark $XDG_CONFIG_HOME/w3m/brave_bookmarks.html -config $XDG_CONFIG_HOME/w3m/config'
	alias flp='flashplayer'
	alias sqm='w3m -bookmark $XDG_CONFIG_HOME/w3m/brave_bookmarks.html -config $XDG_CONFIG_HOME/w3m/config https://student-web1.dm.unipi.it/squirrelmail/src/login.php'
	alias tlmgr='sudo /usr/local/texlive/2019/bin/x86_64-linux/tlmgr'
	alias tl="tldr --list | fzf --preview 'tldr {}' |xargs tldr" # really nice
	alias fb="sudo sed -i '/Actions=new-window;new-private-window;/ a StartupWMClass=brave-browser' /usr/share/applications/brave-browser-nightly.desktop"
	alias chill="mpv https://tinyurl.com/wbl4fya"
	alias libgen='libgen search -o /mnt/01D5707D40B081F0/Users/ascol/Documents/libgen'
	alias ytop='ytop --colorscheme=solarized-dark -asbp'
	alias ncdu='ncdu --color dark'
	alias lynx='lynx -assume_charset="UTF-8" -display_charset=utf-8 -editor=nvim -vikeys'
	alias define='define -c $XDG_CONFIG_HOME/define/define.conf.json'
	alias vip='vis -c $XDG_CONFIG_HOME/vis/config_pulse'
	alias mcl='java -jar /home/francesco/programs_drivers/games/mc/mcTE.jar'

# Rice
alias cfx='nvim $XDG_CONFIG_HOME/sxiv/exec/key-handler'
alias cfs='nvim $XDG_CONFIG_HOME/ncspot/config.toml'
alias cfa='nvim $XDG_CONFIG_HOME/aliasrc'
alias cfd='nvim $XDG_CONFIG_HOME/directories'
alias mim='nvim $XDG_CONFIG_HOME/mimi/mime.conf'
alias zarc='nvim $XDG_CONFIG_HOME/zathura/zathurarc'
alias lfrc='nvim $XDG_CONFIG_HOME/lf/lfrc'
alias zshrc='source $XDG_CONFIG_HOME/zsh/.zshrc'
alias zt='timezsh'
alias cfz='nvim $ZDOTDIR/.zshrc'
alias cfv='nvim $XDG_CONFIG_HOME/nvim/init.vim'
alias cfm='nvim $XDG_CONFIG_HOME/mutt/muttrc'
alias cfr='nvim $HOME/.Xresources'
alias cfmb='nvim $XDG_CONFIG_HOME/ncmpcpp/bindings'
alias cfmc='nvim $XDG_CONFIG_HOME/ncmpcpp/config'
alias cfy='nvim $XDG_CONFIG_HOME/subs'
alias cfu='nvim ${XDG_CONFIG_HOME:-$HOME/.config}/newsboat/urls'
alias cfn='nvim ${XDG_CONFIG_HOME:-$HOME/.config}/newsboat/config'
alias cft='nvim ${XDG_CONFIG_HOME:-$HOME/.config}/stig/rc'


# Personal files
alias people='lfcd /mnt/01D5707D40B081F0/Users/ascol/People'
alias doc='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents'
alias dow='lfcd /mnt/01D5707D40B081F0/Users/ascol/Downloads'
alias mus='lfcd /mnt/01D5707D40B081F0/Users/ascol/Music'
alias m='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/pc_acer/Music'
alias koln='locate -i0 "*koln*flac"|xargs -0 mpv'
alias bl='locate -i0 "*bach*mp3*"|xargs -0 mpv'
alias bf='find /mnt/01D5707D40B081F0/Users -type f \( -iname "*bach*.mp3" -o -iname "*bach*.mp4"  -o -iname "*bach*.m4a" \) -print0|xargs -0 mpv'
alias pics='lfcd /mnt/01D5707D40B081F0/Users/ascol/Pictures'
alias uni='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/UNI'
alias u='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/UNI/Corsi'
alias ib='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/IB'
alias wsp='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/pc_acer/roba!'
alias mthstf='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/mathstuff'
alias movies='lfcd /mnt/01D5707D40B081F0/Users/ascol/Documents/stuff/movies'

alias nv='nvim .'

# Functions

timezsh() {
  shell=${1-$SHELL}
  for i in $(seq 1 10); do /usr/bin/time --output=/tmp/zt$i $shell -i -c exit; done
  for i in $(seq 1 10); do awk '{print $3}' /tmp/zt$i | grep -v swap | sed 's/elapsed//g'|sed 's/0:00\.//g' && rm -f /tmp/zt$i ;done
}

function 256color {
	for i in {0..255}; do print -Pn "%K{$i}  %k%F{$i}${(l:3::0:)i}%f " ${${(M)$((i%6)):#3}:+$'\n'}; done
}

cowfortune() {
  f=/tmp/cowsaytemp
  fortune | cowsay -f stegosaurus -W 80 > $f
  let "N = `cat $f | wc -l`-14"
  head -$N $f
  tail -14 $f | toilet -f term --termwidth --gay
}

truecolor() {
	awk 'BEGIN{
	    s="/\\/\\/\\/\\/\\"; s=s s s s s s s s;
	    for (colnum = 0; colnum<77; colnum++) {
		r = 255-(colnum*255/76);
		g = (colnum*510/76);
		b = (colnum*255/76);
		if (g>255) g = 510-g;
		printf "\033[48;2;%d;%d;%dm", r,g,b;
		printf "\033[38;2;%d;%d;%dm", 255-r,255-g,255-b;
		printf "%s\033[0m", substr(s,colnum+1,1);
	    }
	    printf "\n";
	}'
}

# ffmpeg utilities
compress() {
	ffmpeg -i $1 -vcodec h264 -acodec mp3 $2
}
compressbrate() {
	bitrate=${3:-1000k}
	ffmpeg -i $1 -vcodec h264 -b:v $bitrate -acodec mp3 $2
}

# mkdir and cd into it!
mdcd () {
  mkdir -p $@ && cd ${@:$#}
}

# fuzzy-find manuals
manfd() {
    export MANPATH="/usr/share/man"
    f=$(fd . $MANPATH/man${1:-1} -t f -x echo {/.} | fzf) && man $f
}
# find INSIDE manuals
fman() {
    man -k . | fzf --prompt='Man> ' | awk '{print $1}' | xargs -r man
}
